(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["commodityDetails"],{4278:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"Commodity-Details"},[e("nv-header",{attrs:{title:"商品详情",fixed:!0}}),e("div",{staticClass:"info-data"},[e("img",{attrs:{src:t.details.info.portrait,alt:""}}),e("div",[e("p",[t._v("发布者:")]),e("p",[t._v(t._s(t.details.info.name))])])]),e("p",{staticClass:"details-money"},[t._v("¥"+t._s(t.details.price)+"元 "),e("span",{staticStyle:{"font-size":"0.8em"}},[t._v("包邮")])]),e("div",{staticClass:"details-Content"},[e("span",[t._v(t._s(t.details.brandNew>0?"全新":"非全新"))]),e("p",[t._v("\n      "+t._s(t.details.content)+"\n    ")])]),e("ul",{staticClass:"img-List"},t._l(t.details.imgList,function(t,i){return e("li",{key:i},[e("img",{attrs:{src:t,alt:""}})])}),0),t.isMeOrder?e("div",[1*t.details.status===3?e("div",{staticStyle:{"text-align":"center",padding:"10%",color:"black","font-size":"1.5em"}},[t._v("宝贝已下架\n    ")]):t.isMeOrder&&t.details.status>0?[t.logisticsTxt?e("div",{staticClass:"odd-info"},[e("mt-cell",{attrs:{title:"物流信息"}}),e("mt-field",{attrs:{disabled:!(t.addTxt&&1===t.isMeOrder),placeholder:t.details.logistics.odd?t.details.logistics.odd:"等待发货...",label:"快递单号:",type:"text"},model:{value:t.logistics.odd,callback:function(i){t.$set(t.logistics,"odd",i)},expression:"logistics.odd"}}),e("mt-field",{attrs:{disabled:!(t.addTxt&&1===t.isMeOrder),placeholder:t.details.logistics.oddName?t.details.logistics.oddName:"如:顺丰",label:"快递名称:",type:"text"},model:{value:t.logistics.oddName,callback:function(i){t.$set(t.logistics,"oddName",i)},expression:"logistics.oddName"}}),e("div",{staticStyle:{margin:"10px"}},[1===t.isMeOrder&&t.addTxt?e("mt-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(i){return t.openExpressage(i)}}},[t._v(t._s(t.details.logistics.odd?"修改物流":"物流发货")+"\n          ")]):1*t.details.status===2&&2===t.isMeOrder?e("mt-button",{attrs:{size:"large",type:"primary"},nativeOn:{click:function(i){return t.confirmExpressage(i)}}},[t._v("确认收货\n          ")]):t._e()],1)],1):t._e(),e("mt-cell",{attrs:{value:t.details.logistics.location,title:"寄送地址:"}}),e("div",{staticClass:"info-data"},[e("img",{attrs:{src:t.details.logistics.portrait,alt:""}}),e("div",[e("p",[t._v("购买者: "),e("span",[t._v(t._s(t.details.logistics.name))])]),e("p",[t._v(t._s(t.details.logistics.phone))])])])]:t._e()],2):t._e(),e("router-link",{staticClass:"leaveA-message",attrs:{to:{path:"/publish/leaveAMessage",query:{id:t.details.id}}}},[t._v("\n    查看留言内容\n  ")]),e("div",[1*t.details.status===0&&1===t.isMeOrder?e("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(i){return t.delTreasure(i)}}},[t._v("下架宝贝\n    ")]):1*t.details.status!==0||t.isMeOrder?t._e():e("mt-button",{attrs:{type:"danger",size:"large"},nativeOn:{click:function(i){return t.purchase(i)}}},[t._v("购买宝贝\n    ")])],1)],1)},a=[],n=e("d5db"),l=e("f9fa"),o=e("2f62");function d(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},s=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),s.forEach(function(i){r(t,i,e[i])})}return t}function r(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var c={name:"CommodityDetails",data:function(){return{details:{id:null,imgList:null,content:null,title:null,price:null,LookNumber:null,status:null,brandNew:null,info:{id:null,portrait:null,name:null},logistics:{id:null,odd:"",oddName:"",name:null,phone:null,location:null,portrait:null}},logistics:{odd:"",oddName:""}}},computed:d({},Object(o["c"])({token:function(t){return!t.user.token},info:function(t){return t.user.info}}),{isMeOrder:function(){return this.token||!this.info.id?0:this.details.info&&this.info.id===this.details.info.id?1:!(!this.details.logistics||this.info.id!==this.details.logistics.id)&&2},addTxt:function(){return 1*this.details.status===1||1*this.details.status===2},logisticsTxt:function(){return 1===this.isMeOrder&&this.details.status>0||2===this.isMeOrder&&(1*this.details.status===2||1*this.details.status===4||1*this.details.status===5)}}),methods:{purchase:function(){var t=this;if(this.info.id&&!this.token){if(console.log(this.details.price>this.info.balance,this.details.price,this.info.balance),!(1*this.details.price>this.info.balance))return this.info.location?void n["a"].post("/purchase",{id:this.$route.query.id}).then(function(i){t.getDetails()}):(Object(l["a"])("需要收货地址请添加"),void this.$router.push("/info/amend"));Object(l["a"])("余额不足")}else Object(l["a"])("请登陆再购买")},delTreasure:function(){var t=this;return n["a"].post("/delTreasure",{id:this.$route.query.id}).then(function(i){t.getDetails()})},openExpressage:function(){var t=this;this.logistics.odd&&this.logistics.oddName?n["a"].post("/amendExpressage",{id:this.$route.query.id,odd:this.logistics.odd,oddName:this.logistics.oddName}).then(function(i){t.getDetails(),t.logistics={odd:"",oddName:""}}):Object(l["a"])("地址输入错误")},confirmExpressage:function(){var t=this;n["a"].post("/confirmExpressage",{id:this.$route.query.id}).then(function(i){t.getDetails()})},getDetails:function(){var t=this;n["a"].get("/CommodityDetails",{id:this.$route.query.id}).then(function(i){i.data&&(t.details=i.data)})}},created:function(){this.getDetails()}},u=c,f=(e("85ad"),e("2877")),p=Object(f["a"])(u,s,a,!1,null,"a7bbda52",null);i["default"]=p.exports},"85ad":function(t,i,e){"use strict";var s=e("9c5e"),a=e.n(s);a.a},"9c5e":function(t,i,e){}}]);
//# sourceMappingURL=commodityDetails.b8dbd2f4.js.map