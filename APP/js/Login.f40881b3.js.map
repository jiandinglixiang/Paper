{"version":3,"sources":["webpack:///./src/views/user/Login.vue?6b3b","webpack:///src/views/user/Login.vue","webpack:///./src/views/user/Login.vue?160b","webpack:///./src/views/user/Login.vue","webpack:///./src/views/user/Login.vue?1605"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","fn","back","title","isRegister","_m","label","placeholder","type","model","value","callback","$$v","phone","expression","directives","name","rawName","identity","password","password2","nativeOn","click","$event","register","_v","login","staticRenderFns","Loginvue_type_script_lang_js_","data","methods","verify","util","isMobile","passwordValid","Object","toast","_this","identityValid","__webpack_require__","e","then","t","bind","md5","http","post","default","token","$router","replace","_this2","console","log","components","_defineProperty","field_default","a","user_Loginvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_13a1dec1_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Login_vue_vue_type_style_index_0_id_13a1dec1_scoped_true_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/Login.f40881b3.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('nv-header',{attrs:{\"fn\":_vm.back,\"title\":_vm.isRegister ? '注册':'登陆'}}),_vm._m(0),_c('div',{staticClass:\"from-list\"},[_c('mt-field',{attrs:{\"label\":\"手机号\",\"placeholder\":\"请输入手机号\",\"type\":\"tel\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_c('mt-field',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRegister),expression:\"isRegister\"}],attrs:{\"label\":\"身份证号码\",\"placeholder\":\"身份证号码\",\"type\":\"number\"},model:{value:(_vm.identity),callback:function ($$v) {_vm.identity=$$v},expression:\"identity\"}}),_c('mt-field',{attrs:{\"label\":\"密码\",\"placeholder\":\"请输入密码\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_c('mt-field',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isRegister),expression:\"isRegister\"}],attrs:{\"label\":\"密码\",\"placeholder\":\"再次输入密码\",\"type\":\"password\"},model:{value:(_vm.password2),callback:function ($$v) {_vm.password2=$$v},expression:\"password2\"}}),_c('div',{staticClass:\"buttonList\"},[_c('mt-button',{attrs:{\"type\":\"danger\"},nativeOn:{\"click\":function($event){return _vm.register($event)}}},[_vm._v(\"注册\")]),_c('mt-button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isRegister),expression:\"!isRegister\"}],attrs:{\"type\":\"primary\"},nativeOn:{\"click\":function($event){return _vm.login($event)}}},[_vm._v(\"登陆\")])],1)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"log-img\"},[_c('i',{staticClass:\"fa fa-ravelry fa-5x\"})])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"login\">\r\n    <nv-header :fn=\"back\" :title=\"isRegister ? '注册':'登陆'\"/>\r\n    <div class=\"log-img\">\r\n      <i class=\"fa fa-ravelry fa-5x\"></i>\r\n    </div>\r\n    <div class=\"from-list\">\r\n      <mt-field label=\"手机号\" placeholder=\"请输入手机号\" type=\"tel\" v-model=\"phone\"></mt-field>\r\n      <mt-field v-show=\"isRegister\" label=\"身份证号码\" placeholder=\"身份证号码\" type=\"number\" v-model=\"identity\"></mt-field>\r\n      <mt-field label=\"密码\" placeholder=\"请输入密码\" type=\"password\" v-model=\"password\"></mt-field>\r\n      <mt-field v-show=\"isRegister\" label=\"密码\" placeholder=\"再次输入密码\" type=\"password\" v-model=\"password2\"></mt-field>\r\n      <div class=\"buttonList\">\r\n        <mt-button type=\"danger\" @click.native=\"register\">注册</mt-button>\r\n        <mt-button v-show=\"!isRegister\" @click.native=\"login\" type=\"primary\">登陆</mt-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>//\r\nimport { Field } from 'mint-ui'\r\nimport { http } from '../../tool/http'\r\nimport { util } from '../../tool/util'\r\nimport { Toast } from '../../tool/toast'\r\nimport { setToken } from '../../tool/token'\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data () {\r\n    return {\r\n      identity: '',\r\n      phone: '',\r\n      password: '',\r\n      password2: '',\r\n      isRegister: false\r\n    }\r\n  },\r\n  methods: {\r\n    verify () {\r\n      if (!util.isMobile(this.phone)) {\r\n        Toast('手机输入错误')\r\n        return true\r\n      }\r\n      if (!util.passwordValid(this.password)) {\r\n        Toast('密码输入错误')\r\n        return true\r\n      }\r\n      return false\r\n    },\r\n    register () {\r\n      if (!this.isRegister) {\r\n        this.isRegister = true\r\n        return\r\n      }\r\n      if (this.verify()) return\r\n      if (!util.identityValid(this.identity)) {\r\n        Toast('身份证号码错误')\r\n        return\r\n      }\r\n      if (!util.passwordValid(this.password2)) {\r\n        Toast('再次输入密码错误')\r\n        return\r\n      }\r\n      if (this.password2 !== this.password) {\r\n        Toast('两次密码输入不一致')\r\n        return\r\n      }\r\n      import('js-md5').then(md5 => {\r\n        http.post('/register', {\r\n          phone: this.phone,\r\n          password: md5.default(this.password2),\r\n          identity: this.identity\r\n        }).then(value => {\r\n          if (value && value.data && value.data.token) {\r\n            setToken(value.data.token)\r\n            this.$router.replace('/user')\r\n          }\r\n        })\r\n      })\r\n    },\r\n    back () {\r\n      if (this.isRegister) {\r\n        this.isRegister = false\r\n      } else {\r\n        this.$router.back()\r\n      }\r\n    },\r\n    login () {\r\n      if (this.verify()) return\r\n      import('js-md5').then(md5 => {\r\n        http.post('/login', {\r\n          phone: this.phone,\r\n          password: md5.default(this.password)\r\n        }).then(value => {\r\n          if (value && value.data && value.data.token) {\r\n            console.log(setToken(value.data.token))\r\n            this.$router.replace('/user')\r\n          }\r\n        })\r\n      })\r\n    }\r\n  },\r\n  components: {\r\n    [Field.name]: Field\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n  .login {\r\n    overflow: hidden;\r\n    display: block;\r\n    width: 100%;\r\n\r\n    .log-img {\r\n      text-align: center;\r\n      margin: 25px 0;\r\n      color: red;\r\n    }\r\n\r\n    .from-list {\r\n      margin: 10px;\r\n      overflow: hidden;\r\n\r\n      .buttonList {\r\n        display: flex;\r\n        flex-flow: row nowrap;\r\n        align-items: center;\r\n        justify-content: space-around;\r\n        margin-top: 25px;\r\n\r\n        > button {\r\n          flex: 1 1 40%;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Login.vue?vue&type=template&id=13a1dec1&scoped=true&\"\nimport script from \"./Login.vue?vue&type=script&lang=js&\"\nexport * from \"./Login.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Login.vue?vue&type=style&index=0&id=13a1dec1&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"13a1dec1\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=13a1dec1&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Login.vue?vue&type=style&index=0&id=13a1dec1&scoped=true&lang=scss&\""],"sourceRoot":""}